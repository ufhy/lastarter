(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{u87W:function(e,t,r){"use strict";r.r(t);var n=r("o0o1"),o=r.n(n),s=r("yHho");function i(e,t,r,n,o,s,i){try{var a=e[s](i),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function a(e){i(s,n,o,a,u,"next",e)}function u(e){i(s,n,o,a,u,"throw",e)}a(void 0)}))}}var u={name:"PermissionFormPage",data:function(){return{show:!1,itemId:"",form:new s.a({name:"",guard_name:""})}},computed:{mode:function(){return this.itemId?"edit":"new"},title:function(){return"new"===this.mode?this.$t("user.permissions.heading_create"):this.$t("user.permissions.heading_edit")}},created:function(){var e=this;return a(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.itemId=e.$route.params.id?e.$route.params.id:"",e.form.busy=!0,t.t0="edit"===e.mode,!t.t0){t.next=6;break}return t.next=6,e.fetchRow();case 6:e.form.busy=!1;case 7:case"end":return t.stop()}}),t)})))()},mounted:function(){this.show=!0},methods:{closeAction:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.show=!1,this.$router.push({name:"user.permissions.index",params:{refresh:e}})},fetchRow:function(){var e=this;return this.$http.get("/api/user/permissions/"+this.itemId).then((function(t){var r=t.data;e.form.name=r.name,e.form.guard_name=r.guard_name})).catch((function(t){e.$root.httpError(t)}))},saveAction:function(e){var t=this;return a(o.a.mark((function r(){var n,s;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.form.busy){r.next=2;break}return r.abrupt("return",!1);case 2:if(t.form.clear(),r.prev=3,"new"!==t.mode){r.next=10;break}return r.next=7,t.form.post("/api/user/permissions");case 7:r.t0=r.sent,r.next=13;break;case 10:return r.next=12,t.form.put("/api/user/permissions/"+t.itemId);case 12:r.t0=r.sent;case 13:n=r.t0,s=n.data,t.$coresnackbars.success(s.message),"saveClose"===e?t.closeAction(!0):t.form.reset(),r.next=22;break;case 19:r.prev=19,r.t1=r.catch(3),t.$root.httpError(r.t1);case 22:case"end":return r.stop()}}),r,null,[[3,19]])})))()}}},c=r("KHd+"),f=Object(c.a)(u,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("core-form-dialog",{attrs:{open:e.show,loading:e.form.busy,title:e.title,"close-router":{name:"user.permissions.index"},"btn-save":"edit"!==e.mode},on:{"update:open":function(t){e.show=t},"save-close":function(t){return e.saveAction("saveClose")},save:e.saveAction}},[r("v-text-field",{attrs:{label:e.$t("words.lb_name"),"error-messages":e.form.errors.getAll("name")},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)}),[],!1,null,null,null);t.default=f.exports},yHho:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r("iJs6");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){if(null===e||"object"!==o(e))return e;var t=Array.isArray(e)?[]:{};return Object.keys(e).forEach((function(r){t[r]=s(e[r])})),t}function i(e){return Array.isArray(e)?e:[e]}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errors={}}var t,r,n;return t=e,(r=[{key:"set",value:function(e,t){"object"===c(e)?this.errors=e:this.set(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.errors,u({},e,i(t))))}},{key:"all",value:function(){return this.errors}},{key:"has",value:function(e){return this.errors.hasOwnProperty(e)}},{key:"hasAny",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.some((function(t){return e.has(t)}))}},{key:"any",value:function(){return Object.keys(this.errors).length>0}},{key:"get",value:function(e){if(this.has(e))return this.getAll(e)[0]}},{key:"getAll",value:function(e){return i(this.errors[e]||[])}},{key:"only",value:function(){for(var e=this,t=[],r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return n.forEach((function(r){var n=e.get(r);n&&t.push(n)})),t}},{key:"flatten",value:function(){return Object.values(this.errors).reduce((function(e,t){return e.concat(t)}),[])}},{key:"clear",value:function(e){var t=this,r={};e&&Object.keys(this.errors).forEach((function(n){n!==e&&(r[n]=t.errors[n])})),this.set(r)}}])&&f(t.prototype,r),n&&f(t,n),e}();function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.busy=!1,this.successful=!1,this.errors=new l,this.originalData=s(t),Object.assign(this,t)}var t,r,o;return t=e,(r=[{key:"fill",value:function(e){var t=this;this.keys().forEach((function(r){t[r]=e[r]}))}},{key:"data",value:function(){var e=this;return this.keys().reduce((function(t,r){return p({},t,m({},r,e[r]))}),{})}},{key:"keys",value:function(){return Object.keys(this).filter((function(t){return!e.ignore.includes(t)}))}},{key:"startProcessing",value:function(){this.errors.clear(),this.busy=!0,this.successful=!1}},{key:"finishProcessing",value:function(){this.busy=!1,this.successful=!0}},{key:"clear",value:function(){this.errors.clear(),this.successful=!1}},{key:"reset",value:function(){var t=this;Object.keys(this).filter((function(t){return!e.ignore.includes(t)})).forEach((function(e){t[e]=s(t.originalData[e])}))}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.submit("get",e,t)}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.submit("post",e,t)}},{key:"patch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.submit("patch",e,t)}},{key:"put",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.submit("put",e,t)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.submit("delete",e,t)}},{key:"submit",value:function(e,t){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.startProcessing();var s="get"===e?{params:this.data()}:this.data();return new Promise((function(i,a){Object(n.a)().request(p({url:r.route(t),method:e,data:s},o)).then((function(e){r.finishProcessing(),i(e)})).catch((function(e){r.busy=!1,e&&r.errors.set(r.extractErrors(e)),a(e)}))}))}},{key:"extractErrors",value:function(t){return t.data&&"object"===y(t.data)?t.data.errors?p({},t.data.errors):t.data.message?{error:t.data.message}:p({},t.data):{error:e.errorMessage}}},{key:"route",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;return e.routes.hasOwnProperty(t)&&(n=decodeURI(e.routes[t])),"object"!==y(r)&&(r={id:r}),Object.keys(r).forEach((function(e){n=n.replace("{".concat(e,"}"),r[e])})),n}},{key:"onKeydown",value:function(e){e.target.name&&this.errors.clear(e.target.name)}}])&&b(t.prototype,r),o&&b(t,o),e}();v.routes={},v.errorMessage="Something went wrong. Please try again.",v.ignore=["busy","successful","errors","originalData"];var d=v}}]);